id: az_paragraph_chucks_view
label: AZ Paragraph Chunks View
migration_group: az_migration
migration_tags:
  - Quickstart Content Migration
status: true

source:
  plugin: az_paragraphs_item
  bundle: uaqs_content_chunks_view

destination:
  plugin: 'entity_reference_revisions:paragraph'
  default_bundle: az_view_reference

process:
  field_az_view_reference:
    view_display:
      -
        plugin: explode
        source: vname
        delimeter: '|'
    target_id:
      -
        plugin: extract
        source: '@view_display'
        index:
          - 0
    display_id:
      -
        plugin: extract
        source: '@view_display'
        index:
          - 1
    argument:
      -
        plugin: skip_on_empty
        method: process
        source: vargs
      -
        plugin: explode
        delimeter: ','
      -
        plugin: sub_process
        process:
          id:
            plugin: migration_lookup
            migration:
              - az_event_categories
              - az_news_tags
              - az_person_categories
              - az_person_categories_secondary
    plugin: paragraphs_chunks_view_display_mapping
    source: field_uaqs_view

  behavior_settings:
    plugin: paragraphs_behavior_settings

dependencies:
  enforced:
    module:
      - az_migration
